<h2>{{zone.dn}}</h2>

<div ng-show="zone" ng-controller="RRController">
  <h3>
    Resource Record ({{ rrs.length }})
    <button type="button" ng-click="addRR()" class="float-right btn btn-sm btn-primary ml-2"><span class="glyphicon glyphicon-plus" aria-hidden="true"></span> Add RR</button>
  </h3>

  <p><input type="search" class="form-control form-control-sm" placeholder="Search" ng-model="query" autofocus></p>
  <table class="table table-hover table-bordered table-striped table-sm" style="table-layout: fixed;">
    <thead>
      <tr>
	<th>resource records</th>
	<th style="width: 5%;">act</th>
      </tr>
    </thead>
    <tbody>
      <tr ng-repeat="rr in rrs | filter: query">
	<td ng-if="!rr.edit" style="overflow:hidden; text-overflow: ellipsis;white-space: nowrap;">
	  <span ng-click="toogleRR()" class="glyphicon glyphicon-chevron-right" ng-if="!rr.expand"></span>
	  <span ng-click="toogleRR()" class="glyphicon glyphicon-chevron-down" ng-if="rr.expand"></span>
	  <span ng-click="toogleRR()" class="text-monospace" title="{{ rr.string }}">{{ rr.string }}</span>
	  <div class="row" ng-show="rr.expand">
	    <dl class="col-sm-6 row">
	      <dt class="col-sm-3 text-right">Class</dt>
	      <dd class="col-sm-9 text-muted text-monospace">{{ rr.fields.Hdr.Class | nsclass }}</dd>
	      <dt class="col-sm-3 text-right">TTL</dt>
	      <dd class="col-sm-9 text-muted text-monospace">{{ rr.fields.Hdr.Ttl }}</dd>
	      <dt class="col-sm-3 text-right">RRType</dt>
	      <dd class="col-sm-9 text-muted text-monospace">{{ rr.fields.Hdr.Rrtype | nsrrtype }}</dd>
	    </dl>
	    <ul class="col-sm-6" style="list-style: none">
	      <li ng-repeat="(k,v) in rr.fields" ng-if="k != 'Hdr'">
		<strong class="float-left mr-2">{{ k }}</strong> <span class="text-muted text-monospace" style="display:block;overflow:hidden; text-overflow: ellipsis;white-space: nowrap;" title="{{v}}">{{ v }}</span>
	      </li>
	    </ul>
	  </div>
	</td>
	<td ng-if="rr.edit">
	  <form ng-submit="newRR(rr)">
	    <input class="form-control text-monospace" ng-model="rr.string">
	  </form>
	</td>
	<td>
	  <button type="button" ng-click="deleteRR(rr)" class="btn btn-sm btn-danger" ng-if="!rr.edit && rr.fields.Hdr.Rrtype != 6"><span class="glyphicon glyphicon-trash" aria-hidden="true"></span></button>
	  <button type="button" ng-click="newRR(rr)" class="btn btn-sm btn-success" ng-if="rr.edit"><span class="glyphicon glyphicon-ok" aria-hidden="true"></span></button>
	</td>
      </tr>
    </tbody>
  </table>
</div>
